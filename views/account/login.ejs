<%- include('../partials/header') %>

<main>
    <h1><%= title %></h1>
    
    <!-- Display flash messages -->
    <% if (messages) { %>
        <% if (messages.error && messages.error.length > 0) { %>
            <div class="flash-message error">
                <p><%= messages.error[0] %></p>
            </div>
        <% } %>
        <% if (messages.success && messages.success.length > 0) { %>
            <div class="flash-message success">
                <p><%= messages.success[0] %></p>
            </div>
        <% } %>
    <% } %>
    
    <!-- Display validation errors -->
    <% if (errors) { %>
        <ul class="notice">
            <% errors.array().forEach(error => { %>
                <li><%= error.msg %></li>
            <% }) %>
        </ul>
    <% } %>
    
    <!-- Login Form -->
    <div class="form-container">
        <form action="/account/login" method="post" class="form" id="loginForm">
            <div class="form-group">
                <label for="account_email">Email Address *</label>
                <input 
                    type="email" 
                    id="account_email" 
                    name="account_email" 
                    placeholder="Enter your email" 
                    required
                    title="Please enter a valid email address"
                    class="form-input"
                >
                <div class="input-hint">Must be a valid email address</div>
            </div>
            
            <div class="form-group">
                <label for="account_password">Password *</label>
                <div class="password-container">
                    <input 
                        type="password" 
                        id="account_password" 
                        name="account_password" 
                        placeholder="Enter your password" 
                        required
                        title="Password is required"
                        class="form-input"
                    >
                    <button type="button" id="togglePassword" class="password-toggle" aria-label="Show password">
                        ğŸ‘ï¸â€ğŸ—¨ï¸
                    </button>
                </div>
                <div class="input-hint">Password is required</div>
            </div>
            
            <div class="form-group">
                <button type="submit" class="btn btn-primary">Sign In</button>
            </div>
            
            <div class="form-note">
                <p>* All fields are required</p>
            </div>
        </form>
        
        <!-- Registration link -->
        <div class="form-link">
            <p>Don't have an account? <a href="/account/register">Register here</a></p>
        </div>
    </div>
</main>

<!-- Password Toggle JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const togglePassword = document.querySelector('#togglePassword');
    const passwordInput = document.querySelector('#account_password');
    
    if (togglePassword && passwordInput) {
        togglePassword.addEventListener('click', function() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.textContent = type === 'password' ? 'ğŸ‘ï¸â€ğŸ—¨ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸';
            this.setAttribute('aria-label', type === 'password' ? 'Show password' : 'Hide password');
        });
    }
});
</script>

<%- include('../partials/footer') %>