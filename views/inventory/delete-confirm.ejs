<%- include('../partials/header') %>

<main>
    <h1><%= title %></h1>
    
    <!-- Display flash messages if any -->
    <% if (messages) { %>
        <% if (messages.error && messages.error.length > 0) { %>
            <div class="flash-message error">
                <p><%= messages.error[0] %></p>
            </div>
        <% } %>
        <% if (messages.success && messages.success.length > 0) { %>
            <div class="flash-message success">
                <p><%= messages.success[0] %></p>
            </div>
        <% } %>
        <% if (messages.notice && messages.notice.length > 0) { %>
            <div class="flash-message notice">
                <p><%= messages.notice[0] %></p>
            </div>
        <% } %>
    <% } %>
    
    <!-- Validation Errors -->
    <% if (errors && errors.length > 0) { %>
        <div class="flash-message error">
            <% errors.forEach(error => { %>
                <p><%= error.msg %></p>
            <% }) %>
        </div>
    <% } %>
    
    <!-- Delete Confirmation Form -->
    <div class="form-container">
        <p>Confirm Deletion - The delete is permanent.</p>
        
        <!-- Form with action="/inv/delete" for delete process -->
        <form class="form" action="/inv/delete" method="post" id="deleteForm">
            
            <!-- Make -->
            <div class="form-group">
                <label for="inv_make">Make:</label>
                <input 
                    type="text" 
                    id="inv_make" 
                    name="inv_make" 
                    class="form-input" 
                    value="<%= inv_make || '' %>"
                    readonly
                >
            </div>
            
            <!-- Model -->
            <div class="form-group">
                <label for="inv_model">Model:</label>
                <input 
                    type="text" 
                    id="inv_model" 
                    name="inv_model" 
                    class="form-input" 
                    value="<%= inv_model || '' %>"
                    readonly
                >
            </div>
            
            <!-- Year -->
            <div class="form-group">
                <label for="inv_year">Year:</label>
                <input 
                    type="text" 
                    id="inv_year" 
                    name="inv_year" 
                    class="form-input" 
                    value="<%= inv_year || '' %>"
                    readonly
                >
            </div>
            
            <!-- Price -->
            <div class="form-group">
                <label for="inv_price">Price:</label>
                <input 
                    type="text" 
                    id="inv_price" 
                    name="inv_price" 
                    class="form-input" 
                    value="<%= inv_price || '' %>"
                    readonly
                >
            </div>
            
            <!-- Submit Button -->
            <div class="form-group">
                <button type="submit" class="btn btn-danger">Delete Vehicle</button>
            </div>
            
            <!-- Hidden field for inventory ID -->
            <input type="hidden" name="inv_id" 
            <% if(locals.inv_id) { %> value="<%= locals.inv_id %>" <% } %>>
            
            <!-- Back Link -->
            <div class="form-link">
                <a href="/inv/">Return to Inventory Management</a>
            </div>
        </form>
    </div>
</main>

<%- include('../partials/footer') %>